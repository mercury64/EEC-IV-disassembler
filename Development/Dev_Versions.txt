
(dropped some older version descriptions)

4.0.7.8 (28 Oct 2020)

Fixed -  Missing symbols when processed in 'not SYM' commands (i.e. WORD 3234 3235 "MyName" not handled correctly, but SYM 3234 "MyName" was).
         May still be incorrect for multibank argument symbols.

NB. This is an interim release - made some big internal changes to code, which should not be visible to users (I hope !). 
Trying to improve subroutine arguments, for recognition of size, symbols and other features (encoded works, but not always, offsets do not).

4.0.7.9 (4 Dec 2020)

Fixed - Bank detect not picking up banks correctly in some binaries - changed detect algorithm
Changed internal bank handling so that addresses without bank can be recognised, so symbol names are better resolved for subroutine arguments. 

4.0.7.10 (12 Dec 2020)

Fixed - Possible crash with corrupt or non-806x binaries.
Fixed - 'catch22' where non-detect of banks could not be overriden with user commands.  More error checks added here too.
Fixed - Incorrect bank processing for sym names in multibanks.

Changed - default to adding bank 1 in multibanks for addresses with no bank.  (NB. This cannot work in all cases, only where use is obviously an address)

4.0.7.11 (21 Dec 2020)

Fixed - Comments get pushed up to start of bank (multibanks only).
Fixed - Bit-wise opcodes not displaying symbols above bit 7 for CLRW (incorrectly set as byte)
Fixed - 'W' flag with symbols not working if set in upper byte.
Fixed - According to Ford manuals, the 'odd address' word mode for 8065 CPU does not apply for registers below R20.
Fixed - internal change to ranges indexing for symbols and rbases, it was possible to 'lose' a symbol entirely.


4.0.7.12 (24 Dec 2020)

Fixed - Regression errors with comments layout from version .11.
Fixed - Regression errors with rbase and syms after .11 changes

4.0.7.13 (20 March 2021)

Fixed - additional data printout of bank (i.e. : K <n>)  shows (bank + 1).
Fixed - additional command input required :k <bank+1>  e.g. :K 9 instead of : k 8
Fixed - immediate push did not resolve bank address printout correctly in multibanks.

comment changes - removed '\P' sequence in comments.
                  added '\M' = next tab, like word processors
                  added \R<ch><num>  = runout char 'ch' num times, and \R<num> = runout 'space' num times
                  added \SW<add> to find write symbol instead of read sym

Temporarily removed autocomments (may move to _msg file to help keep clarity of printouts)


4.0.7.15 (14 June 2021)

Fixed - Bug with immediate byte shown as word (LDZBW, LDSBW, ML2B, ML3B, etc.)
Fixed - infinite loop in internal data tracking (before printout) 

Changed - temporarily removed auto code and data detection from 'gaps' as it doesn't work properly.
Changed - ALL odd addressed word ops change bank. (SFRs were ignored before)

4.0.7.16 (16 June 2021)

Fix print bug which shows wrong value for STW (probably only happens in test bins) 

10 March - minor fix, so not upped version number. Fix incorrect read of symbols at 0x3ff returning "invalid bank" 

-------------------------------------------------------------

NOTE - After a HUGE gap, during which I was trying to write a new much neater, much more elegant version (which I can't get to work !)
I decide to go back to the last working version and start over. 
 
Changed to simpler version numbering.

From here I will probably merge in many of those new versions from this attempt.

-------------------------------------------------------------


4.0.8  (01 Mar 2023)

Fixed - Inconsistent handling of addresses (bank prefixes) in multibanks across symbols, comments, commands.

NB. I expect probable regression errors as I have changed the whole address verification to use the same routine...

OOPS! I also left on the 'gap detect' from v 4.06 which does work for functions but not so well for tables, and it does produce some
false matches.

4.0.9

1. Fix regression errors causing symbol names not to be matched correctly in various places in code printout (my error from changes in 4.08)

2. Fix inconsistent spaces in comments after symbol addresses (\S syntax)  

3. Turn off 'gap detect' again as it causes some strange behaviour and user commands to be ignored.

NB.  4.0.10 removed due to another stupid error in address validation


4.0.11 (10 mar 23)

1. Revert change to 'skip' opcode, which seems to cause several issues

2. change address validation to match other common tools (I hope)

-------------------------------------------------------------

4.0.12

1. Revise address validation (again !!)  For all address inputs in .dir and .cmt files). 
   Final rules are - 
   All addresses are read as up to 5 hex digits, 0xfffff. The first digit is bank. Valid banks are 0,1,8,9 for all bins.
   Registers are 0x0 to 0x3ff (0x0 to 0xff for 8061) Registers cannot have a bank.  Leading zeroes are ignored for compatibility.
   
   Single banks (all 8061, some 8065) No bank required (i.e. 4 digits). Addresses may have a bank 8 attached, which is not displayed. 
   
   Multibanks.  
   0x400 to 0x1fff allowed, and defaults to Bank 1 (= data bank in every bin .... so far)
   0x2000 to 0xffff MUST have a bank attached.

2. Fixed - Incorrect print layout for 'split comments' ('|' character) and bit names with AND and OR opcodes.
3. Fixed - Comments showing write symbol names ('\S') when they should be read names.
4. Add   - Word tables in .dir commands.     (not detected automatically yet, due soon)























